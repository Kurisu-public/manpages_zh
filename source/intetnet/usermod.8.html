<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>usermod(8) - − 修改一个用户账户</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#-">语法</a>
    <a href="#-">描述</a>
    <a href="#-">选项</a>
    <a href="#CAVEATS">CAVEATS</a>
    <a href="#-">配置文件</a>
    <a href="#-">文件</a>
    <a href="#-">参见</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>usermod(8)</li>
    <li class='tc'></li>
    <li class='tr'>usermod(8)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>usermod</code> - <span class="man-whatis">− 修改一个用户账户</span>
</p>

<h2 id="-">语法</h2>

<p><code>usermod [选项] 登录</code></p>

<h2 id="-">描述</h2>

<p>usermod修改系统账户文件和在命令行上指定的相关更改.</p>

<h2 id="-">选项</h2>

<p>usermod可以接受的选项有:</p>

<dl>
<dt><code>−a, −−append</code></dt><dd><p>将用户添加到附加组.只能和−G选项一起使用.</p></dd>
<dt><code>−c, −−comment COMMENT</code></dt><dd><p>用户密码文件中注释字段的新值.通常使用<span class="man-ref">chfn<span class="s">(1)</span></span>工具对其进行修改.</p></dd>
<dt><code>−d, −−home HOME_DIR</code></dt><dd><p>用户的新登录目录.如果给了−m选项,当前主目录的内容将会移动到新主目
录中,如果不存在,则创建.</p></dd>
<dt><code>−e, −−expiredate EXPIRE_DATE</code></dt><dd><p>用户账户将被禁用的日期.日期以YYYY−MM−DD格式指定.空EXPIRE_DATE参
数将禁用账户过期.此选项需要一个/etc/passwd文件.如果没有,将会创建
一条/etc/shadow项目.</p></dd>
<dt><code>−f, −−inactive INACTIVE</code></dt><dd><p>密码过期之后,账户被彻底禁用之前的天数.0表示密码过期时,立即禁用账
户.−1表示不使用这个功能.此选项需要一个/etc/passwd文件.如果没有,
将会创建一条/etc/shadow项目.</p></dd>
<dt><code>−g, −−gid GROUP</code></dt><dd><p>用户的新初始登录组的组名或数字代号.此组必须存在.用户主目录中,属
于原来的主组的文件将转交新组所有.主目录之外的文件所属的组必须手
动修改.</p></dd>
<dt><code>−G, −−groups GROUP1[,GROUP2,...[,GROUPN]]]</code></dt><dd><p>用户还属于的附加组列表.组之间使用逗号分隔,没有空格.这些组需要遵
守和−g选项中给的组同样的限制.如果用户当前是一个组的成员,而这个组
没有列在这里,用户将被从那个组里便删除.这个行为可以通过−a选项修改
,这使用户追加到给出的附加组列表中.</p></dd>
<dt><code>−l, −−login NEW_LOGIN</code></dt><dd><p>用户的名称将会从LOGIN修改为NEW_LOGIN.不会更改别的任何东西.特别是
,用户的主目录名和邮件池也需要手动修改以和新登录名对应.</p></dd>
<dt><code>−L, −−lock</code></dt><dd><p>锁定用户的密码.这会在用户加密的密码之前放置一个“!”,可以快速禁用
密码.您可以和−p或−U配合使用此选项.注意:如果希望锁定账户(不仅仅是
通过密码访问),您也需要设置EXPIRE_DATE为1.</p></dd>
<dt><code>−m, −−move−home</code></dt><dd><p>将用户的主目录移动到新位置.这个选项只有和−d(或−−home)选项组合使
用时才有效.usermod会改写文件的属主并复制模式、ACL和扩展属性,但是
稍后也可能需要手动修改.</p></dd>
<dt><code>−o, −−non−unique</code></dt><dd><p>使用−u选项时,可以将用户ID改为非唯一的值.</p></dd>
<dt><code>−p, −−password PASSWORD</code></dt><dd><p>已经加密过的密码,就像<span class="man-ref">crypt<span class="s">(3)</span></span>返回的那样.注意:不推荐使用这个选项,
因为密码(或加密过的密码)会被用户通过列出这个过程而看到.您应该确
保密码符合系统的密码政策.</p></dd>
<dt><code>−R, −−root CHROOT_DIR</code></dt><dd><p>Apply changes in the CHROOT_DIR directory and use the
configuration files from the CHROOT_DIR directory.</p></dd>
<dt><code>−s, −−shell SHELL</code></dt><dd><p>用户的新登录shell的名称.将此字段设置为空会让系统选择默认的登录
shell.</p></dd>
<dt><code>−u, −−uid UID</code></dt><dd><p>用户ID的新数值.这个值必须是唯一的,除非使用了−o选项,必须是非负值.
用户的邮箱,用户主目录中属于此用户的文件的属主ID也将自动更改.用户
主目录之外文件所有权必须手动修复.不会对/etc/login.defs中的
UID_MIN,UID_MAX,SYS_UID_MIN和SYS_UID_MAX进行检查.</p></dd>
<dt><code>−U, −−unlock</code></dt><dd><p>解锁用户的密码.这将移除加密的密码之前的“!”.您可以将此选项和−p或−
L配合使用.注意:如果您希望解锁账户(不只是使用密码访问),您也应该设
置EXPIRE_DATE(例如设置为99999,或者/etc/default/useradd中的EXPIRE
值).</p></dd>
<dt><code>−v, −−add−sub−uids FIRST−LAST</code></dt><dd><p>Add a range of subordinate uids to the user's account. This
option may be specified multiple times to add multiple ranges to
a users account. No checks will be performed with regard to
SUB_UID_MIN, SUB_UID_MAX, or SUB_UID_COUNT from /etc/login.defs.</p></dd>
<dt><code>−V, −−del−sub−uids FIRST−LAST</code></dt><dd><p>Remove a range of subordinate uids from the user's account. This
option may be specified multiple times to remove multiple ranges
to a users account. When both −−del−sub−uids and −−add−sub−uids
are specified, the removal of all subordinate uid ranges happens
before any subordinate uid range is added. No checks will be
performed with regard to SUB_UID_MIN, SUB_UID_MAX, or
SUB_UID_COUNT from /etc/login.defs.</p></dd>
<dt><code>−w, −−add−sub−gids FIRST−LAST</code></dt><dd><p>Add a range of subordinate gids to the user's account. This
option may be specified multiple times to add multiple ranges to
a users account. No checks will be performed with regard to
SUB_GID_MIN, SUB_GID_MAX, or SUB_GID_COUNT from /etc/login.defs.</p></dd>
<dt><code>−W, −−del−sub−gids FIRST−LAST</code></dt><dd><p>Remove a range of subordinate gids from the user's account. This
option may be specified multiple times to remove multiple ranges
to a users account. When both −−del−sub−gids and −−add−sub−gids
are specified, the removal of all subordinate gid ranges happens
before any subordinate gid range is added. No checks will be
performed with regard to SUB_GID_MIN, SUB_GID_MAX, or
SUB_GID_COUNT from /etc/login.defs.</p></dd>
<dt><code>−Z, −−selinux−user SEUSER</code></dt><dd><p>用户登陆的SELinux用户.空的SEUSER将移除用户LOGIN的SELinux用户映射
(如果有).</p></dd>
</dl>


<h2 id="CAVEATS">CAVEATS</h2>

<p>如果要更改用户的数字ID、用户名或主目录,需要确保允许命令时,用户没有执行任
何进程.usermod会在Linux上进行检查,但是在其它平台上,仅仅根据utmp检查用户
是否已经登录.您必须手动更改crontab文件或at作业的属主.您必须更改NIS服务器
上的NIS相关内容.</p>

<h2 id="-">配置文件</h2>

<p>在/etc/login.defs中有如下配置变量,可以用来更改此工具的行为:</p>

<dl>
<dt><code>MAIL_DIR (string)</code></dt><dd><p>邮箱目录.修改或删除用户账户时需要处理邮箱,如果没有指定,将使用编
译时指定的默认值.</p></dd>
<dt><code>MAIL_FILE (string)</code></dt><dd><p>定义用户邮箱文件的位置(相对于主目录).</p></dd>
<dt><code>MAIL_DIR and MAIL_FILE</code></dt><dd><p>变量由useradd,usermod和userdel用于创建、移动或删除用户邮箱.如果
MAIL_CHECK_ENAB设置为yes,它们也被用于定义MAIL环境变量.</p></dd>
<dt><code>MAX_MEMBERS_PER_GROUP (number)</code></dt><dd><p>每个组条目的最大成员数.达到最大值时,在/etc/group开始一个新条目(
行)(使用同样的名称,同样的密码,同样的GID).默认值是0,意味着组中的
成员数没有限制.此功能(分割组)允许限制组文件中的行长度.这对于确保
NIS组的行比长于1024字符.如果要强制这个限制,可以使用25.注意:分割
组可能不受所有工具的支持(甚至在Shadow工具集中).您不应该使用这个
变量,除非真的需要.</p></dd>
<dt><code>SUB_GID_MIN (number), SUB_GID_MAX (number), SUB_GID_COUNT (number)</code></dt><dd><p>If /etc/subuid exists, the commands useradd and newusers (unless
the user already have subordinate group IDs) allocate
SUB_GID_COUNT unused group IDs from the range SUB_GID_MIN to
SUB_GID_MAX for each new user. The default values for
SUB_GID_MIN, SUB_GID_MAX, SUB_GID_COUNT are respectively 100000,
600100000 and 10000.</p></dd>
<dt><code>SUB_UID_MIN (number), SUB_UID_MAX (number), SUB_UID_COUNT (number)</code></dt><dd><p>If /etc/subuid exists, the commands useradd and newusers (unless
the user already have subordinate user IDs) allocate
SUB_UID_COUNT unused user IDs from the range SUB_UID_MIN to
SUB_UID_MAX for each new user. The default values for
SUB_UID_MIN, SUB_UID_MAX, SUB_UID_COUNT are respectively 100000,
600100000 and 10000.</p></dd>
</dl>


<h2 id="-">文件</h2>

<pre><code>/etc/group
组账户信息.
/etc/gshadow
安全组账户信息.
/etc/login.defs
Shadow密码套件配置.
/etc/passwd
用户账户信息.
/etc/shadow
安全用户账户信息.
/etc/subgid
Per user subordinate group IDs.
/etc/subuid
Per user subordinate user IDs.
</code></pre>

<h2 id="-">参见</h2>

<p><span class="man-ref">chfn<span class="s">(1)</span></span>, <span class="man-ref">chsh<span class="s">(1)</span></span>, <span class="man-ref">passwd<span class="s">(1)</span></span>, <span class="man-ref">crypt<span class="s">(3)</span></span>, <span class="man-ref">gpasswd<span class="s">(8)</span></span>, <span class="man-ref">groupadd<span class="s">(8)</span></span>, <span class="man-ref">groupdel<span class="s">(8)</span></span>, <span class="man-ref">groupmod<span class="s">(8)</span></span>, <span class="man-ref">login.defs<span class="s">(5)</span></span>, <span class="man-ref">subgid<span class="s">(5)</span></span>, <span class="man-ref">subuid<span class="s">(5)</span></span>,<span class="man-ref">useradd<span class="s">(8)</span></span>, <span class="man-ref">userdel<span class="s">(8)</span></span>.</p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'></li>
    <li class='tc'>April 2015</li>
    <li class='tr'>usermod(8)</li>
  </ol>

  </div>
</body>
</html>
